<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Plate Editor</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="/plate/script.js" defer></script>
</head>
<body id="pageContent">
<div class="container">
    <h2>Plate</h2>
    <form id="plateForm">
        <label>ID Plate</label>
        <input type="text" id="plateId" placeholder="Введите ID Plate" required>

        <div class="lang-group" id="titleGroup">
            <label>Заголовок (RU)</label>
            <textarea id="title_ru" required></textarea>

            <button type="button" class="add-btn" onclick="addTitleLanguage()">+ Добавить язык</button>
        </div>

        <div class="lang-group" id="bodyGroup" data-type="title">
            <label>Сообщение (RU)</label>
            <textarea id="body_ru" placeholder="Введите сообщение на русском" required></textarea>
            <button type="button" class="add-btn" onclick="addBodyLanguage()">+ Добавить язык</button>
        </div>


        <div class="lang-group" id="actionLangGroup" data-type="action">
            <label>Action</label>
            <div id="actionGroup" style="display:flex; gap:8px; flex-wrap:nowrap;">
                <select id="action_type_select" style="flex: 0 0 160px;"></select>
                <input type="text" id="action" placeholder="Введите значение" style="flex:1;">
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="should_hide_after_click" checked>
                <label for="should_hide_after_click">При нажатии на кнопку плашки, сразу ее скрыт</label>
            </div>

            <label style="margin-top:12px;">Текст кнопки (RU)</label>
            <input type="text" id="action_title_ru">

            <button type="button" class="add-btn" onclick="addActionTitleLanguage()" style="margin-top:8px;">
                + Добавить язык
            </button>
        </div>

        <label>Ссылка на иконку</label>
        <input type="text" id="icon_url">

        <div class="checkbox-group">
            <input type="checkbox" id="with_close_btn" checked>
            <label for="with_close_btn">Показать кнопку закрытия</label>
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="with_reopen_button" checked>
            <label for="with_reopen_button">Показывать плашку снова, если пользователь ранее её закрыл (при совпадении plate_id)</label>
        </div>

        <label>Условия</label>
        <div id="plateConditionBuilder" class="lang-group">
            <div style="display:flex; gap:10px; align-items:center; flex-wrap:nowrap; overflow-x:auto;">
                <select id="plateConditionKey"></select>
                <select id="plateConditionOperator" style="display:none; max-width: 80px;"></select>
                <input type="text" id="plateConditionValue" placeholder="значение">
                <button type="button" onclick="addPlateCondition()">Добавить</button>
            </div>
            <div id="plateConditionList" style="margin-top: 10px;"></div>
        </div>
        <input type="hidden" id="plateConditions" value='{}'>

        <button type="submit">Сохранить Plate</button>
    </form>

    <button onclick="loadPlateHistory()">Доступные плашки</button>
    <div id="historyPanel"></div>
</div>
</body>
</html>